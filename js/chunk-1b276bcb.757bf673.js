(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1b276bcb"],{1276:function(t,A,e){"use strict";var a=e("d784"),i=e("44e7"),n=e("825a"),o=e("1d80"),s=e("4840"),c=e("8aa5"),r=e("50c4"),l=e("14c3"),u=e("9263"),d=e("d039"),h=[].push,g=Math.min,p=4294967295,f=!d((function(){return!RegExp(p,"y")}));a("split",2,(function(t,A,e){var a;return a="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(t,e){var a=String(o(this)),n=void 0===e?p:e>>>0;if(0===n)return[];if(void 0===t)return[a];if(!i(t))return A.call(a,t,n);var s,c,r,l=[],d=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),g=0,f=new RegExp(t.source,d+"g");while(s=u.call(f,a)){if(c=f.lastIndex,c>g&&(l.push(a.slice(g,s.index)),s.length>1&&s.index<a.length&&h.apply(l,s.slice(1)),r=s[0].length,g=c,l.length>=n))break;f.lastIndex===s.index&&f.lastIndex++}return g===a.length?!r&&f.test("")||l.push(""):l.push(a.slice(g)),l.length>n?l.slice(0,n):l}:"0".split(void 0,0).length?function(t,e){return void 0===t&&0===e?[]:A.call(this,t,e)}:A,[function(A,e){var i=o(this),n=void 0==A?void 0:A[t];return void 0!==n?n.call(A,i,e):a.call(String(i),A,e)},function(t,i){var o=e(a,t,this,i,a!==A);if(o.done)return o.value;var u=n(t),d=String(this),h=s(u,RegExp),m=u.unicode,v=(u.ignoreCase?"i":"")+(u.multiline?"m":"")+(u.unicode?"u":"")+(f?"y":"g"),k=new h(f?u:"^(?:"+u.source+")",v),b=void 0===i?p:i>>>0;if(0===b)return[];if(0===d.length)return null===l(k,d)?[d]:[];var C=0,S=0,x=[];while(S<d.length){k.lastIndex=f?S:0;var w,B=l(k,f?d:d.slice(S));if(null===B||(w=g(r(k.lastIndex+(f?0:S)),d.length))===C)S=c(d,S,m);else{if(x.push(d.slice(C,S)),x.length===b)return x;for(var I=1;I<=B.length-1;I++)if(x.push(B[I]),x.length===b)return x;S=C=w}}return x.push(d.slice(C)),x}]}),!f)},"216c":function(t,A,e){"use strict";var a=function(){var t=this,A=t.$createElement,e=t._self._c||A;return e("div",{staticClass:"nav"},[e("van-nav-bar",{attrs:{title:t.title,"left-text":"返回","left-arrow":"",fixed:"",placeholder:""},on:{"click-left":t.goPack}})],1)},i=[],n={name:"Nav",props:{title:{type:String,default:""}},methods:{goPack:function(){this.$emit("gopack")}}},o=n,s=(e("96a3"),e("2877")),c=Object(s["a"])(o,a,i,!1,null,"1dc54734",null);A["a"]=c.exports},"4c5f":function(t,A,e){},"4f6a":function(t,A){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAAAgY0hSTQAAeiYAAICEAAD6AAAAgOgAAHUwAADqYAAAOpgAABdwnLpRPAAAAURQTFRFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADbx4HwAAAGt0Uk5TACBcYC8HmP25FqPPBjNmeq2Huxq3jw6F9fspAliz4ubCcApu69p38fxjE8DeLQHd6GoFltWoNsbL84AMbfoY0TX+PxJM8i6p22Iw4GifGYz05ZDU37JGTe9yFOl9Az5xEH7tQQ2ZYR2ID/mSWkIJAAAAAWJLR0QAiAUdSAAAAAlwSFlzAAAASAAAAEgARslrPgAAASlJREFUOMtjYKAVYGRiZsEjzcrGnp2dzcGJUwFXNhhw8+CQ582GAj4cCvhhCgRwKBCEKRDCLi8sAlMgik1aTFwCJi8pBRWTlpGVk1dQVAIyeZRVsrNV1dRB8hqaUHktbYgGHV09Gf3sbANDIwZGYxNVUzOoPI85zEgDi+xsSytrdEttshHA1tgO01X2SAocsIW7I5ICJywKnJHks12wKNBzRVLghi1k3JEUeHgaYSrwkoTLA1nehqwYKnxgzvT18w/Izg4EBqlwUHBIaBhcRbgOSDoiUo+BIUocGMrR4tFgDTFwFbFxNvHhShB2QmIS3Mpk7NGdkgpT4I4jwSjDFATjUJAGU2COQ0G6LVRBDA4FDBnQBJKJS0GseBbIAkYG3MBOJs1Bj4EqAADu53mPF3399AAAACV0RVh0ZGF0ZTpjcmVhdGUAMjAyMC0xMS0xMVQwOTozMjo1MCswODowMAABHWEAAAAldEVYdGRhdGU6bW9kaWZ5ADIwMjAtMTEtMTFUMDk6MzI6NTArMDg6MDBxXKXdAAAASnRFWHRzdmc6YmFzZS11cmkAZmlsZTovLy9ob21lL2FkbWluL2ljb24tZm9udC90bXAvaWNvbl9pMWdqNGEydnN3L2ZlbnhpYW5nLnN2Z8CcpwMAAAAASUVORK5CYII="},"96a3":function(t,A,e){"use strict";e("4c5f")},a15b:function(t,A,e){"use strict";var a=e("23e7"),i=e("44ad"),n=e("fc6a"),o=e("a640"),s=[].join,c=i!=Object,r=o("join",",");a({target:"Array",proto:!0,forced:c||!r},{join:function(t){return s.call(n(this),void 0===t?",":t)}})},a640:function(t,A,e){"use strict";var a=e("d039");t.exports=function(t,A){var e=[][t];return!!e&&a((function(){e.call(null,A||function(){throw 1},1)}))}},b0c0:function(t,A,e){var a=e("83ab"),i=e("9bf2").f,n=Function.prototype,o=n.toString,s=/^\s*function ([^ (]*)/,c="name";a&&!(c in n)&&i(n,c,{configurable:!0,get:function(){try{return o.call(this).match(s)[1]}catch(t){return""}}})},c84b:function(t,A,e){"use strict";e.r(A);var a=function(){var t=this,A=t.$createElement,a=t._self._c||A;return a("div",{staticClass:"detail"},[a("div",[a("Nav",{attrs:{title:t.menuTitle},on:{gopack:t.goPack}}),a("div",{staticClass:"right-img",on:{click:function(A){t.showShare=!0}}},[a("img",{attrs:{src:e("4f6a"),alt:""}})])],1),a("van-share-sheet",{attrs:{title:"立即分享给好友",options:t.options},model:{value:t.showShare,callback:function(A){t.showShare=A},expression:"showShare"}}),a("div",{staticClass:"delta-box"},[a("div",{staticClass:"del-Img"},[a("img",{staticClass:"auto-img",attrs:{src:t.detailData.large_img,alt:""}}),a("div",{staticClass:"del-img-pro-name"},[a("div",[t._v(t._s(t.detailData.name))]),a("span",[t._v("￥"+t._s(t.detailData.price))])])]),a("div",{staticClass:"contain"},[a("div",{staticClass:"con-select"},t._l(t.detailData.rules,(function(A,e){return a("div",{key:e,staticClass:"con-select-box"},[a("span",{staticClass:"con-temper"},[t._v(t._s(A.title))]),t._l(A.rule,(function(e,i){return a("span",{key:i,staticClass:"con-tem-select",class:{temActive:A.ruleIndex==i,"large-text":e.title.length>=4},on:{click:function(e){return t.tasteToggle(A,i)}}},[t._v(t._s(e.title))])}))],2)})),0),a("div",{staticClass:"con-priceBox"},[a("div",{staticClass:"con-price"},[t._v("选择数量")]),a("div",{staticClass:"con-count"},[a("van-stepper",{attrs:{theme:"round","button-size":"24","disable-input":""},model:{value:t.temCount,callback:function(A){t.temCount=A},expression:"temCount"}})],1)]),a("div",{staticClass:"con-descrtion"},[a("div",{staticClass:"con-des-title"},[t._v("商品描述")]),t._l(t.detailData.desc,(function(A,e){return a("div",{key:e,staticClass:"con-des-text"},[a("p",[t._v(t._s(e+1)+"、"+t._s(A))])])}))],2),a("div",{staticClass:"actionIcon"},[a("van-goods-action",[a("van-goods-action-icon",{attrs:{icon:"cart-o",text:"购物袋",badge:0==t.shopBagCount?"":t.shopBagCount,color:t.shopBagCount>0?"#724123":"#646566",to:{name:"Shopbag"}}}),a("van-goods-action-icon",{attrs:{icon:t.isLike?"star":"star-o",text:t.isLike?"已收藏":"收藏",color:"#724123"},on:{click:t.toggleFindLike}}),a("van-goods-action-button",{attrs:{color:"#e7b993",type:"warning",text:"加入购物车"},on:{click:t.addShopBag}}),a("van-goods-action-button",{attrs:{type:"danger",text:"立即购买"},on:{click:function(A){return t.buyNow(!1)}}})],1)],1)])])],1)},i=[],n=(e("a15b"),e("d81d"),e("b0c0"),e("ac1f"),e("1276"),e("eadb"),e("216c")),o={name:"Detail",components:{Nav:n["a"]},data:function(){return{menuTitle:"商品详情",pid:"",detailData:[],temCount:0,shopBagCount:0,isLike:!1,showShare:!1,options:[{name:"微信",icon:"wechat"},{name:"微博",icon:"weibo"},{name:"复制链接",icon:"link"},{name:"分享海报",icon:"poster"},{name:"二维码",icon:"qrcode"}]}},created:function(){this.pid=this.$route.params.pid,this.getProductDetail(),this.findLike(),this.checkShopBagCount()},methods:{getProductDetail:function(){var t=this;this.$toast.loading({message:"加载中...",forbidClick:!0,duration:0}),this.axios({method:"GET",url:"/productDetail",params:{appkey:this.appkey,pid:this.pid}}).then((function(A){if(t.$toast.clear(),600==A.data.code){var e=A.data.result[0];e.desc=e.desc.split(/\n/);var a=[],i=["tem","sugar","milk","cream"];i.map((function(t){var A={};A.title=e[t+"_desc"],A.ruleIndex=0,A.rule=[];var i=e[t].split("/");i.map((function(t){""!=t&&A.rule.push({title:t})})),A.rule.length>0&&a.push(A)})),e.rules=a,t.detailData=e}})).catch((function(A){t.$toast.clear()}))},tasteToggle:function(t,A){t.ruleIndex!=A&&(t.ruleIndex=A)},goPack:function(){var t=this;this.$toast.loading({message:"加载中...",forbidClick:!0,duration:0}),setTimeout((function(){t.$router.go(-1)}),1500)},toggleFindLike:function(){var t=this,A=localStorage.getItem("tokenStr");A||(this.$toast("请先登录，即将为您跳转"),setTimeout((function(){return t.$router.push({name:"Login"})}),1e3));var e=this.isLike?"/notlike":"/like";this.$toast.loading({message:"加载中...",forbidClick:!0,duration:0}),this.axios({method:"POST",url:e,data:{appkey:this.appkey,pid:this.pid,tokenString:A}}).then((function(A){t.$toast.clear(),700==A.data.code?(t.$toast("请先登录，即将为您跳转"),setTimeout((function(){t.$router.push({name:"Login"})}),500)):800==A.data.code?t.isLike=!0:900==A.data.code&&(t.isLike=!1),t.$toast(A.data.msg)})).catch((function(A){t.$toast.clear()}))},findLike:function(){var t=this,A=localStorage.getItem("tokenStr");A&&(this.$toast.loading({message:"加载中...",forbidClick:!0,duration:0}),this.axios({method:"GET",url:"/findlike",params:{appkey:this.appkey,pid:this.pid,tokenString:A}}).then((function(A){t.$toast.clear(),1e3==A.data.code&&A.data.result.length>0&&(t.isLike=!0)})).catch((function(A){t.$toast.clear()})))},checkShopBagCount:function(){var t=this,A=localStorage.getItem("tokenStr");A&&(this.$toast.loading({message:"加载中...",forbidClick:!0,duration:0}),this.axios({method:"GET",url:"/shopcartRows",params:{appkey:this.appkey,tokenString:A}}).then((function(A){t.$toast.clear(),8e3==A.data.code&&A.data.result>0&&(t.shopBagCount=A.data.result)})).catch((function(A){t.$toast.clear()})))},addShopBag:function(t){var A=this,e=localStorage.getItem("tokenStr");if(!e)return this.$toast("请先登录"),this.$router.push({name:"Login"});var a={tokenString:e,appkey:this.appkey,pid:this.pid,count:this.temCount},i=[];this.detailData.rules.map((function(t){i.push(t.rule[t.ruleIndex].title)})),a.rule=i.join("/"),this.$toast.loading({message:"加载中...",forbidClick:!0,duration:0}),this.axios({method:"POST",url:"/addShopcart",data:a}).then((function(e){if(A.$toast.clear(),700==e.data.code)A.$router.push({name:"Login"});else if(3e3==e.data.code){if(!t)return A.$toast.loading({message:"加载中...",forbidClick:!0,duration:0}),void setTimeout((function(){A.$toast.clear(),A.$router.push({name:"Payment",query:{sids:e.data.sid}})}),800);A.$toast(e.data.msg),1==e.data.status&&A.shopBagCount++}})).catch((function(t){A.$toast.clear()}))},buyNow:function(t){var A=this;this.$toast.loading({message:"加载中...",forbidClick:!0,duration:0}),setTimeout((function(){A.$toast.clear(),A.addShopBag(t)}),800)},onSelect:function(t){Toast(t.name),this.showShare=!1}}},s=o,c=e("2877"),r=Object(c["a"])(s,a,i,!1,null,null,null);A["default"]=r.exports},d81d:function(t,A,e){"use strict";var a=e("23e7"),i=e("b727").map,n=e("1dde"),o=e("ae40"),s=n("map"),c=o("map");a({target:"Array",proto:!0,forced:!s||!c},{map:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}})},eadb:function(t,A,e){}}]);
//# sourceMappingURL=chunk-1b276bcb.757bf673.js.map