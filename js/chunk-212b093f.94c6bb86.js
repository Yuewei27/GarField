(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-212b093f"],{1175:function(t,e,s){"use strict";s.r(e);var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"payment"},[s("van-nav-bar",{attrs:{title:"提交订单","left-text":"返回","left-arrow":"",fixed:"",placeholder:""},on:{"click-left":t.goPack}}),s("div",{staticClass:"pay-box"},[s("div",{staticClass:"shipAddress"},[s("div",{staticClass:"pay-ship-con"},[s("div",{staticClass:"con-text"},[s("span",{on:{click:t.openSelectAddress}},[t._v("选择收货地址")]),s("van-icon",{staticClass:"arrow",attrs:{name:"arrow"}})],1),s("div",{staticClass:"addressInfo"},[s("div",{staticClass:"user-info"},[s("div",{staticClass:"user-name"},[t._v(t._s(t.currentAddress.name))]),s("div",{staticClass:"user-phone"},[t._v(t._s(t.currentAddress.tel))]),t.currentAddress.isDefault?s("div",{staticClass:"defualt"},[t._v("默认")]):t._e()]),s("div",{staticClass:"detail-address"},[t._v(t._s(t.currentAddress.address))])])])]),s("div",{staticClass:"pay-order-list"},[s("OrderInfo",{attrs:{"info-text-title":"订单信息","pro-count":t.productTotal.count,total:t.productTotal.total}},t._l(t.payProduct,(function(t,e){return s("ListModule",{key:e,attrs:{item:t,"is-numerical":!1}})})),1)],1),s("div",{staticClass:"btn-box"},[s("van-button",{staticClass:"btn",attrs:{type:"primary",block:"",round:"",color:"#19120e"},on:{click:t.payTie}},[t._v("立即结算")])],1)]),s("van-popup",{attrs:{"is-link":"",position:"bottom",closeable:""},model:{value:t.isOpen,callback:function(e){t.isOpen=e},expression:"isOpen"}},[s("div",{staticClass:"address-title"},[t._v("选择地址")]),s("van-address-list",{attrs:{list:t.list,"default-tag-text":"默认"},on:{add:t.newAddress,select:t.selectAddress},model:{value:t.chosenAddressId,callback:function(e){t.chosenAddressId=e},expression:"chosenAddressId"}})],1)],1)},a=[],n=(s("99af"),s("a15b"),s("d81d"),s("b0c0"),s("ac1f"),s("1276"),s("f049"),s("5f3c")),o=s("f1dd"),r={name:"Payment",data:function(){return{payProduct:[],list:[],chosenAddressId:"",currentAddress:[],productTotal:{count:0,total:0},isOpen:!1,lat:"",lng:"",accountInfo:{nickName:"",phone:""}}},components:{OrderInfo:n["a"],ListModule:o["a"]},created:function(){this.sids=this.$route.query.sids.split("-"),this.getAllproduct(),this.getAddressData(),this.getAccountInfo(),this.checkPosition()},methods:{setPosition:function(){var t=this;this.$dialog.confirm({title:"确认设置当前位置",message:"是否需要当前位置作为收货地址?",confirmButtonColor:"#0C34BA"}).then((function(){t.getPisition()})).catch((function(t){}))},checkPosition:function(){this.lat=localStorage.getItem("posiLat"),this.lng=localStorage.getItem("posilng"),this.lat&&this.lng&&this.setPosition()},getPisition:function(){var t=this,e=[];e.push(this.lat,this.lng);var s=e.join(",");this.$toast.loading({message:"加载中...",forbidClick:!0,duration:0}),this.axios({method:"GET",url:"https://api.it120.cc/common/map/qq/address",params:{key:"TVSBZ-CGE66-3GXSY-MJBLO-7JZ32-LKBJO",location:s}}).then((function(e){t.$toast.clear();var s=e.data.data.result.address+e.data.data.result.address_reference.crossroad.title,i={address:s,tel:t.accountInfo.phone,name:t.accountInfo.nickName},a=[];a.push(i),t.chosenAddressId=t.accountInfo.userId,t.currentAddress=a[0]})).catch((function(t){}))},getAccountInfo:function(){var t=this,e=localStorage.getItem("tokenStr");if(!e)return this.$toast("请先登录"),this.$router.push({name:"Login"});this.$toast.loading({message:"加载中...",forbidClick:!0,duration:0}),this.axios({method:"GET",url:"/findAccountInfo",params:{appkey:this.appkey,tokenString:e}}).then((function(e){if(t.$toast.clear(),700==e.data.code)t.$router.push({name:"Login"});else if("B001"==e.data.code){var s=e.data.result[0];t.accountInfo=s}})).catch((function(e){t.$toast.clear()}))},goPack:function(){var t=this;this.$toast.loading({message:"加载中...",forbidClick:!0,duration:1500}),setTimeout((function(){t.$router.go(-1)}),1500)},getAddressData:function(){var t=this,e=localStorage.getItem("tokenStr");if(!e)return this.$toast("请先登录"),this.$router.push({name:"Login"});this.$toast.loading({message:"加载中...",forbidClick:!0,duration:0}),this.axios({method:"GET",url:"/findAddress",params:{appkey:this.appkey,tokenString:e}}).then((function(e){t.$toast.clear(),700==e.data.code?t.$router.push({name:"Login"}):2e4==e.data.code&&(e.data.result.map((function(e){e.isDefault=Boolean(e.isDefault),e.id=e.aid,e.address="".concat(e.province).concat(e.city).concat(e.county).concat(e.addressDetail),e.isDefault&&(t.chosenAddressId=e.aid,t.currentAddress=e)})),t.list=e.data.result)})).catch((function(e){t.$toast.clear()}))},getAllproduct:function(){var t=this,e=localStorage.getItem("tokenStr");if(!e)return this.$toast("请先登录"),this.$router.push({name:"Login"});this.$toast.loading({message:"加载中...",forbidClick:!0,duration:0}),this.axios({method:"GET",url:"/commitShopcart",params:{appkey:this.appkey,tokenString:e,sids:JSON.stringify(this.sids)}}).then((function(e){if(t.$toast.clear(),700==e.data.code)t.$router.push({name:"Login"});else if(5e4==e.data.code){if(0==e.data.result.length)return t.$router.push({name:"Shopbag"});e.data.result.map((function(e){t.productTotal.count+=e.count,t.productTotal.total+=e.count*e.price})),t.payProduct=e.data.result}else t.$toast(e.data.msg)})).catch((function(e){t.$toast.clear()}))},openSelectAddress:function(){this.isOpen=!0},newAddress:function(){this.$router.push({name:"NewAddress"})},selectAddress:function(t,e){this.isOpen=!1,this.currentAddress=t},payMent:function(){var t=this,e=localStorage.getItem("tokenStr");if(!e)return this.$toast("请先登录"),this.$router.push({name:"Login"});this.$toast.loading({message:"加载中...",forbidClick:!0,duration:0}),this.axios({method:"POST",url:"/pay",data:{appkey:this.appkey,tokenString:e,sids:JSON.stringify(this.sids),phone:this.currentAddress.tel,address:this.currentAddress.address,receiver:this.currentAddress.name}}).then((function(e){t.$toast.clear(),700==e.data.code?t.$router.push({name:"Login"}):(t.$toast(e.data.msg),setTimeout((function(){t.$router.push({name:"Order"})})))})).catch((function(e){t.$toast.clear()}))},payTie:function(){var t=this;this.chosenAddressId?this.$dialog.confirm({title:"确认订单",message:"是否立即结算?",confirmButtonColor:"#0C34BA"}).then((function(){t.payMent()})).catch((function(t){})):this.$toast("请选择地址")}}},c=r,l=s("2877"),d=Object(l["a"])(c,i,a,!1,null,null,null);e["default"]=d.exports},1276:function(t,e,s){"use strict";var i=s("d784"),a=s("44e7"),n=s("825a"),o=s("1d80"),r=s("4840"),c=s("8aa5"),l=s("50c4"),d=s("14c3"),u=s("9263"),f=s("d039"),h=[].push,p=Math.min,v=4294967295,m=!f((function(){return!RegExp(v,"y")}));i("split",2,(function(t,e,s){var i;return i="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(t,s){var i=String(o(this)),n=void 0===s?v:s>>>0;if(0===n)return[];if(void 0===t)return[i];if(!a(t))return e.call(i,t,n);var r,c,l,d=[],f=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),p=0,m=new RegExp(t.source,f+"g");while(r=u.call(m,i)){if(c=m.lastIndex,c>p&&(d.push(i.slice(p,r.index)),r.length>1&&r.index<i.length&&h.apply(d,r.slice(1)),l=r[0].length,p=c,d.length>=n))break;m.lastIndex===r.index&&m.lastIndex++}return p===i.length?!l&&m.test("")||d.push(""):d.push(i.slice(p)),d.length>n?d.slice(0,n):d}:"0".split(void 0,0).length?function(t,s){return void 0===t&&0===s?[]:e.call(this,t,s)}:e,[function(e,s){var a=o(this),n=void 0==e?void 0:e[t];return void 0!==n?n.call(e,a,s):i.call(String(a),e,s)},function(t,a){var o=s(i,t,this,a,i!==e);if(o.done)return o.value;var u=n(t),f=String(this),h=r(u,RegExp),g=u.unicode,C=(u.ignoreCase?"i":"")+(u.multiline?"m":"")+(u.unicode?"u":"")+(m?"y":"g"),y=new h(m?u:"^(?:"+u.source+")",C),b=void 0===a?v:a>>>0;if(0===b)return[];if(0===f.length)return null===d(y,f)?[f]:[];var I=0,_=0,A=[];while(_<f.length){y.lastIndex=m?_:0;var x,k=d(y,m?f:f.slice(_));if(null===k||(x=p(l(y.lastIndex+(m?0:_)),f.length))===I)_=c(f,_,g);else{if(A.push(f.slice(I,_)),A.length===b)return A;for(var $=1;$<=k.length-1;$++)if(A.push(k[$]),A.length===b)return A;_=I=x}}return A.push(f.slice(I)),A}]}),!m)},"1f40":function(t,e,s){},5899:function(t,e){t.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},"58a8":function(t,e,s){var i=s("1d80"),a=s("5899"),n="["+a+"]",o=RegExp("^"+n+n+"*"),r=RegExp(n+n+"*$"),c=function(t){return function(e){var s=String(i(e));return 1&t&&(s=s.replace(o,"")),2&t&&(s=s.replace(r,"")),s}};t.exports={start:c(1),end:c(2),trim:c(3)}},"5d2b":function(t,e,s){"use strict";s("1f40")},"5f3c":function(t,e,s){"use strict";var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"orderInfo"},[s("div",{staticClass:"pay-Info"},[s("div",{staticClass:"InfoText clearfix"},[s("div",{staticClass:"info-text-title fl"},[t._v(t._s(t.InfoTextTitle))]),t.isShowRight?s("div",{staticClass:"right-Info fr"},[t.isLivery?s("div",{staticClass:"right-complete clearfix"},[s("div",{staticClass:"complete fl"},[t._v("已完成")]),s("div",{staticClass:"delete fr",on:{click:t.remove}},[s("van-icon",{attrs:{size:"20",name:"delete"}})],1)]):s("div",{staticClass:"right-livery",on:{click:t.confirmLivery}},[t._v("确认收货")])]):t._e()]),s("div",{staticClass:"pay-Pro-box"},[t._t("default")],2),s("div",{staticClass:"pay-combined"},[t._m(0),""!=t.dateTime?s("div",{staticClass:"dateTime"},[t._v(t._s(t.dateTime))]):t._e(),s("div",{staticClass:"paytotle"},[s("div",{staticClass:"pay-totle-count"},[t._v(" 共计 "),s("span",[t._v(t._s(t.proCount))]),t._v(" 件 ")]),s("div",{staticClass:"pay-total-money"},[t._v("合计 ￥"+t._s(t._f("filtration")(t.total)))])])])])])},a=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"pay-circle"},[s("div",{staticClass:"circle circle-left"}),s("div",{staticClass:"circle circle-right"})])}],n=(s("a9e3"),{name:"OrderInfo",props:{InfoTextTitle:{type:String,default:"左边标题"},isShowRight:{type:Boolean,default:!1},dateTime:{type:String,default:" "},proCount:{type:Number,default:0},total:{type:[Number,String],default:0},isLivery:{type:Boolean,default:!1}},methods:{confirmLivery:function(){this.$emit("confirm-livery")},remove:function(){this.$emit("remove")}}}),o=n,r=(s("67bf"),s("2877")),c=Object(r["a"])(o,i,a,!1,null,"5decfef7",null);e["a"]=c.exports},"67bf":function(t,e,s){"use strict";s("762a")},"762a":function(t,e,s){},a15b:function(t,e,s){"use strict";var i=s("23e7"),a=s("44ad"),n=s("fc6a"),o=s("a640"),r=[].join,c=a!=Object,l=o("join",",");i({target:"Array",proto:!0,forced:c||!l},{join:function(t){return r.call(n(this),void 0===t?",":t)}})},a640:function(t,e,s){"use strict";var i=s("d039");t.exports=function(t,e){var s=[][t];return!!s&&i((function(){s.call(null,e||function(){throw 1},1)}))}},a9e3:function(t,e,s){"use strict";var i=s("83ab"),a=s("da84"),n=s("94ca"),o=s("6eeb"),r=s("5135"),c=s("c6b6"),l=s("7156"),d=s("c04e"),u=s("d039"),f=s("7c73"),h=s("241c").f,p=s("06cf").f,v=s("9bf2").f,m=s("58a8").trim,g="Number",C=a[g],y=C.prototype,b=c(f(y))==g,I=function(t){var e,s,i,a,n,o,r,c,l=d(t,!1);if("string"==typeof l&&l.length>2)if(l=m(l),e=l.charCodeAt(0),43===e||45===e){if(s=l.charCodeAt(2),88===s||120===s)return NaN}else if(48===e){switch(l.charCodeAt(1)){case 66:case 98:i=2,a=49;break;case 79:case 111:i=8,a=55;break;default:return+l}for(n=l.slice(2),o=n.length,r=0;r<o;r++)if(c=n.charCodeAt(r),c<48||c>a)return NaN;return parseInt(n,i)}return+l};if(n(g,!C(" 0o1")||!C("0b1")||C("+0x1"))){for(var _,A=function(t){var e=arguments.length<1?0:t,s=this;return s instanceof A&&(b?u((function(){y.valueOf.call(s)})):c(s)!=g)?l(new C(I(e)),s,A):I(e)},x=i?h(C):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),k=0;x.length>k;k++)r(C,_=x[k])&&!r(A,_)&&v(A,_,p(C,_));A.prototype=y,y.constructor=A,o(a,g,A)}},b0c0:function(t,e,s){var i=s("83ab"),a=s("9bf2").f,n=Function.prototype,o=n.toString,r=/^\s*function ([^ (]*)/,c="name";i&&!(c in n)&&a(n,c,{configurable:!0,get:function(){try{return o.call(this).match(r)[1]}catch(t){return""}}})},d81d:function(t,e,s){"use strict";var i=s("23e7"),a=s("b727").map,n=s("1dde"),o=s("ae40"),r=n("map"),c=o("map");i({target:"Array",proto:!0,forced:!r||!c},{map:function(t){return a(this,t,arguments.length>1?arguments[1]:void 0)}})},f049:function(t,e,s){},f1dd:function(t,e,s){"use strict";var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"listModule"},[s("div",{staticClass:"pay-Info-box"},[s("div",{staticClass:"pay-product-Info"},[s("div",{staticClass:"pay-info-img"},[s("img",{staticClass:"auto-img",attrs:{src:t.item.small_img||t.item.smallImg,alt:""}})]),s("div",{staticClass:"pay-info-con"},[s("div",{staticClass:"pay-info-text"},[s("div",[s("div",{staticClass:"pay-name"},[t._v(t._s(t.item.name))]),s("div",{staticClass:"pay-rule"},[t._v(t._s(t.item.rule))])]),s("div",{staticClass:"pay-enname"},[t._v(t._s(t.item.enname))])]),s("div",{staticClass:"pay-count-box"},[s("div",{staticClass:"pay-price"},[t._v("￥"+t._s(t.item.price))]),s("div",[t.isNumerical?s("div",{staticClass:"count-box"},[s("van-stepper",{attrs:{theme:"round","button-size":"20","disable-input":""},on:{change:t.changeCount},model:{value:t.vanCount,callback:function(e){t.vanCount=e},expression:"vanCount"}})],1):s("div",{staticClass:"count-box"},[t._v("x"+t._s(t.item.count))])])])])])])])},a=[],n={name:"ListModule",props:{item:{type:Object,default:function(){return{}}},isNumerical:{type:Boolean,default:!1}},data:function(){return{vanCount:0}},created:function(){this.vanCount=this.item.count},methods:{changeCount:function(){this.item.count=this.vanCount,this.$emit("coo",this.item)}}},o=n,r=(s("5d2b"),s("2877")),c=Object(r["a"])(o,i,a,!1,null,"70ebfa2f",null);e["a"]=c.exports}}]);
//# sourceMappingURL=chunk-212b093f.94c6bb86.js.map