(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-ac63d496"],{"5db0":function(t,a,e){},bb51:function(t,a,e){"use strict";e.r(a);var s=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"home",on:{click:t.Blur}},[e("van-nav-bar",{attrs:{fixed:"",placeholder:""},scopedSlots:t._u([{key:"left",fn:function(){return[e("div",{staticClass:"home-nav"},[e("div",[e("div",{staticClass:"greetings"},[t._v(t._s(t.hoursTip))]),e("div",{staticClass:"city"},[t._v(t._s(t.city))])]),e("div",{staticClass:"nickName"},[t._v(t._s(t.userInfo.nickName))])])]},proxy:!0},{key:"right",fn:function(){return[e("div",{staticClass:"home-search"},[e("van-search",{attrs:{placeholder:"输入商品名称"},on:{input:t.searchGoods}}),t.isSearch?e("div",{staticClass:"search-con"},t._l(t.searchData,(function(a,s){return e("div",{key:s,staticClass:"search-list"},[e("div",{on:{click:function(e){return t.goDetail(a.pid)}}},[t._v(t._s(a.name))])])})),0):t._e()],1)]},proxy:!0}])}),e("div",{staticClass:"home-content"},[e("div",{staticClass:"banner-box"},[e("van-swipe",{attrs:{autoplay:3500},on:{change:t.changeCurrentIndex},scopedSlots:t._u([{key:"indicator",fn:function(){return[e("div",{staticClass:"index-box"},t._l(t.bannerData,(function(a,s){return e("div",{key:s,class:{active:s==t.currentIndex}})})),0)]},proxy:!0}])},t._l(t.bannerData,(function(a,s){return e("van-swipe-item",{key:s},[e("img",{staticClass:"auto-img",attrs:{src:a.bannerImg,alt:""},on:{click:function(e){return t.goDetail(a.pid)}}})])})),1)],1),e("div",{staticClass:"product-box"},[e("div",{staticClass:"product-contain"},t._l(t.recomTab,(function(a,s){return e("div",{key:s,staticClass:"clearfix pro-title-box",class:[a.isRecomTab?"tabActive":""],on:{click:function(e){return t.recomTabtoggle(a)}}},[e("span",{staticClass:"pro-title"},[t._v(t._s(a.title))])])})),0),e("div",{staticClass:"ComProduce"},t._l(t.hotProduct,(function(a,s){return e("div",{key:s,staticClass:"pro-item fl"},[e("div",{on:{click:function(e){return t.goDetail(a.pid)}}},[e("img",{staticClass:"auto-img",attrs:{src:a.smallImg}})]),e("div",{staticClass:"products clearfix"}),e("div",{staticClass:"pro-info fl"},[e("div",{staticClass:"pro-name one-text"},[t._v(t._s(a.name))]),e("div",{staticClass:"pro-enname one-text"},[t._v(t._s(a.enname))]),e("div",{staticClass:"pro-price"},[t._v("￥"+t._s(a.price))])])])})),0)])])],1)},i=[],o=(e("5db0"),{name:"Home",data:function(){return{currentIndex:0,bannerData:[],recomTab:[{title:"热卖推荐",isRecomTab:!0,id:1},{title:"新品推荐",isRecomTab:!1,id:2}],hotProduct:[],searchData:[],isSearch:!1,userInfo:{nickName:""},hoursTip:"",city:""}},created:function(){this.getBannerData(),this.getHotProdect("isHot",1),this.getUserInfo(),this.setTimePeriod(),this.getPosition()},methods:{getPosition:function(){var t=this,a={key:"TVSBZ-CGE66-3GXSY-MJBLO-7JZ32-LKBJO"},e="https://apis.map.qq.com/ws/location/v1/ip";a.output="jsonp",this.$jsonp(e,a).then((function(a){t.city=a.result.ad_info.city,localStorage.setItem("posiLat",a.result.location.lat),localStorage.setItem("posilng",a.result.location.lng)})).catch((function(t){}))},searchGoods:function(t){var a=this;this.$toast.loading({message:"加载中...",forbidClick:!0,duration:0}),this.axios({method:"GET",url:"/search",params:{appkey:this.appkey,name:t}}).then((function(t){a.$toast.clear(),"Q001"==t.data.code&&(a.isSearch=!0,a.searchData=t.data.result)})).catch((function(t){a.$toast.clear(),a.$toast("输入关键词有误")}))},Blur:function(){this.isSearch=!1},changeCurrentIndex:function(t){this.currentIndex=t},getBannerData:function(){var t=this;this.$toast.loading({message:"加载中...",forbidClick:!0,duration:0}),this.axios({method:"GET",url:"/banner",params:{appkey:this.appkey}}).then((function(a){t.$toast.clear(),300==a.data.code&&(t.bannerData=a.data.result)})).catch((function(a){t.$toast.clear()}))},recomTabtoggle:function(t){for(var a=0;a<this.recomTab.length;a++)if(this.recomTab[a].isRecomTab){this.recomTab[a].isRecomTab=!1;break}t.isRecomTab=!0,"1"==t.id?this.getHotProdect("isHot",1):"2"==t.id&&this.getHotProdect("type","coffee")},getHotProdect:function(t,a){var e=this;this.axios({method:"GET",url:"/typeProducts",params:{appkey:this.appkey,key:t,value:a}}).then((function(t){e.$toast.clear(),500==t.data.code&&(e.hotProduct=t.data.result)})).catch((function(t){e.$toast.clear()}))},getUserInfo:function(){var t=this,a=localStorage.getItem("tokenStr");a&&(this.$toast.loading({message:"加载中...",forbidClick:!0,duration:0}),this.axios({method:"GET",url:"/findMy",params:{appkey:this.appkey,tokenString:a}}).then((function(a){t.$toast.clear(),"A001"==a.data.code&&(t.userInfo.nickName=a.data.result[0].nickName)})).catch((function(a){t.$toast.clear()})))},setTimePeriod:function(){var t=new Date;t.getHours()>0&&t.getHours()<=6?this.hoursTip="深夜好!":t.getHours()>6&&t.getHours()<=12?this.hoursTip="上午好!":t.getHours()>12&&t.getHours()<=18?this.hoursTip="下午好!":t.getHours()>18&&t.getHours()<=24&&(this.hoursTip="晚上好!")},goDetail:function(t){var a=this;this.isSearch=!1,this.$toast.loading({message:"加载中...",forbidClick:!0,duration:0}),setTimeout((function(){a.$router.push({name:"Detail",params:{pid:t}})}),1e3)}}}),n=o,c=e("2877"),r=Object(c["a"])(n,s,i,!1,null,null,null);a["default"]=r.exports}}]);
//# sourceMappingURL=chunk-ac63d496.13a12afc.js.map