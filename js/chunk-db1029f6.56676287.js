(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-db1029f6","chunk-39f71dd7"],{"1b02":function(t,o,s){},"305b":function(t,o,s){"use strict";s.r(o);var e=function(){var t=this,o=t.$createElement,s=t._self._c||o;return s("div",{staticClass:"secure"},[s("van-nav-bar",{attrs:{title:"安全中心","left-text":"返回","left-arrow":"",fixed:""},on:{"click-left":t.goPack}}),s("AddRessList",[s("div",{staticClass:"secure-box"},[s("div",{staticClass:"cell-box"},[s("van-cell",{attrs:{title:"修改密码","is-link":"",center:!0},on:{click:t.modifyPasswordBox}}),s("van-cell",{attrs:{title:"注销账号","is-link":"",center:!0},on:{click:t.destroyAccount}})],1)])]),s("div",{staticClass:"logout-box"},[s("div",{staticClass:"logout-con"},[s("van-button",{attrs:{color:"#333",block:"",round:""},on:{click:t.logout}},[t._v("退出登录")])],1)]),s("van-popup",{attrs:{"is-link":"",position:"bottom",closeable:""},model:{value:t.isModify,callback:function(o){t.isModify=o},expression:"isModify"}},[s("div",{staticClass:"form-box"},[s("div",{staticClass:"form-title"},[t._v("修改密码")]),s("van-form",[s("van-field",{attrs:{type:t.isModifyPass?"password":"text",name:"旧密码",label:"旧密码",placeholder:"旧密码(首字符必须为字母)","right-icon":t.isModifyPass?"closed-eye":"eye-o",autocomplete:"off"},on:{"click-right-icon":t.toggleType},model:{value:t.password.oldPassword,callback:function(o){t.$set(t.password,"oldPassword",o)},expression:"password.oldPassword"}}),s("van-field",{attrs:{type:t.isModifyPass?"password":"text",name:"新密码",label:"新密码",placeholder:"新密码(首字符必须为字母)","right-icon":t.isModifyPass?"closed-eye":"eye-o",autocomplete:"off"},on:{"click-right-icon":t.toggleType},model:{value:t.password.newPassword,callback:function(o){t.$set(t.password,"newPassword",o)},expression:"password.newPassword"}}),s("div",{staticClass:"commit-btn"},[s("van-button",{attrs:{round:"",block:"",color:"#333"},on:{click:t.commit}},[t._v("提交")])],1)],1)],1)])],1)},a=[],i=(s("d42c"),s("eb4a")),n=s("e3a8"),r={name:"Secure",data:function(){return{isModify:!1,isModifyPass:!0,password:{oldPassword:"",newPassword:""}}},components:{AddRessList:i["default"]},methods:{goPack:function(){this.$router.go(-1)},toggleType:function(){this.isModifyPass=!this.isModifyPass},modifyPasswordBox:function(){this.isModify=!0},logout:function(){var t=this;this.$dialog.confirm({title:"退出登录",message:"是否确定退出登录！",confirmButtonColor:"#0C34BA"}).then((function(){t.$toast.loading({message:"加载中...",forbidClick:!0,duration:0}),setTimeout((function(){t.$toast.clear(),localStorage.removeItem("tokenStr"),t.$router.push({name:"Login"})}),800)})).catch((function(t){}))},destroyAccount:function(){var t=this;this.$dialog.confirm({title:"注销账号",message:"是否确定注销账号，一旦注销无法恢复！",confirmButtonColor:"#0C34BA"}).then((function(){var o=localStorage.getItem("tokenStr");if(!o)return t.$toast("请先登录"),t.$router.push({name:"Login"});t.$toast.loading({message:"加载中...",forbidClick:!0,duration:0}),t.axios({method:"POST",url:"/destroyAccount",data:{appkey:t.appkey,tokenString:o}}).then((function(o){t.$toast.clear(),700==o.data.code?t.$router.push({name:"Login"}):"G001"==o.data.code&&setTimeout((function(){localStorage.removeItem("tokenStr"),t.$router.push({name:"Login"})}),800),t.$toast(o.data.msg)})).catch((function(o){t.$toast.clear()}))})).catch((function(t){}))},commit:function(){var t=this,o={oldPassword:{value:this.password.oldPassword,errorMsg:"旧密码由数字字母下划线组合(6-16字符)",reg:/^[A-Za-z]\w{5,15}$/},newPassword:{value:this.password.newPassword,errorMsg:"新密码由数字字母下划线组合(6-16字符)",reg:/^[A-Za-z]\w{5,15}$/}},s=n["a"].valid(o);if(s){if(this.password.newPassword==this.password.oldPassword)return void this.$toast("新密码和旧密码不能相同");var e=localStorage.getItem("tokenStr");if(!e)return this.$toast("请先登录"),this.$router.push({name:"Login"});this.$toast.loading({message:"加载中...",forbidClick:!0,duration:0}),this.axios({method:"POST",url:"/updatePassword",data:{appkey:this.appkey,tokenString:e,password:this.password.newPassword,oldPassword:this.password.oldPassword}}).then((function(o){t.$toast.clear(),700==o.data.code?t.$router.push({name:"Login"}):"E001"==o.data.code&&setTimeout((function(){localStorage.removeItem("__tk"),t.$router.push({name:"Login"})}),800),t.$toast(o.data.msg)})).catch((function(o){t.$toast.clear()}))}}}},c=r,l=(s("86e6"),s("2877")),d=Object(l["a"])(c,e,a,!1,null,"af2599ea",null);o["default"]=d.exports},"380f":function(t,o,s){"use strict";s("1b02")},7377:function(t,o,s){},"86e6":function(t,o,s){"use strict";s("7377")},d42c:function(t,o,s){},e3a8:function(t,o,s){"use strict";function e(t,o){if(!(t instanceof o))throw new TypeError("Cannot call a class as a function")}function a(t,o){for(var s=0;s<o.length;s++){var e=o[s];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(t,e.key,e)}}function i(t,o,s){return o&&a(t.prototype,o),s&&a(t,s),t}s.d(o,"a",(function(){return l}));s("a6919");var n=s("01e2"),r=s("2b0e");r["a"].use(n["a"]);var c=function(){function t(){e(this,t)}return i(t,[{key:"valid",value:function(t){for(var o in t)if(!t[o].reg.test(t[o].value))return Object(n["a"])(t[o].errorMsg),!1;return!0}}]),t}(),l=new c},eb4a:function(t,o,s){"use strict";s.r(o);var e=function(){var t=this,o=t.$createElement,s=t._self._c||o;return s("div",{staticClass:"addRessList"},[s("div",{staticClass:"bg"}),s("div",{staticClass:"contain"},[t._t("default")],2)])},a=[],i={name:"AddRessList"},n=i,r=(s("380f"),s("2877")),c=Object(r["a"])(n,e,a,!1,null,"97b63bee",null);o["default"]=c.exports}}]);
//# sourceMappingURL=chunk-db1029f6.56676287.js.map